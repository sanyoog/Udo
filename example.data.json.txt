# Udo Data Format Documentation

This file explains the JSON data structure used by Udo for storing pages and tasks.

## Main Data File (maindata.json)

Location: `backend/userdata/maindata.json`

```json
{
  "theme": "light",              // Theme: "light" or "dark"
  "sidebar_collapsed": false,    // Sidebar state: true or false
  "tags": [                      // Array of global tags
    {
      "id": "urgent",            // Unique tag ID (used in tasks)
      "name": "Urgent",          // Display name
      "color": "#000000"         // Color (currently not used in UI)
    },
    {
      "id": "important",
      "name": "Important",
      "color": "#404040"
    }
  ]
}
```

## Page/Board File Format

Location: `backend/userdata/pages/{page-id}.json`

Each page is stored as a separate JSON file with a unique UUID filename.

```json
{
  "id": "unique-page-id",        // UUID generated by backend
  "name": "Project Name",        // Page display name
  "tasks": [                     // Array of tasks
    {
      "id": "unique-task-id",    // UUID generated by backend
      "title": "Task title",     // Task name (required)
      "description": "Task description text here", // Optional description
      "tags": ["urgent", "important"], // Array of tag IDs
      "timestamp": "2026-01-27", // Date or date range (see below)
      "status": "todo"           // Task status (see below)
    }
  ]
}
```

## Task Fields Explained

### Required Fields
- **id**: Auto-generated UUID
- **title**: Task name/title (string)
- **status**: Current task status

### Optional Fields
- **description**: Longer task description (string)
- **tags**: Array of tag IDs that reference tags in maindata.json
- **timestamp**: Date information (see date formats below)

## Task Status Values

Tasks can have one of four statuses:

- **"todo"**: Not started
- **"in-progress"**: Currently being worked on
- **"completed"**: Finished
- **"overdue"**: Automatically set when end date has passed

## Date/Timestamp Formats

Udo supports three date formats:

### 1. Single Date
```json
"timestamp": "2026-01-27"
```
Task is due on a single day. If this date passes and task is not completed, it moves to overdue.

### 2. Date Range (colon separator)
```json
"timestamp": "2026-01-20:2026-01-30"
```
Task spans from start date to end date. Task becomes overdue after end date passes.

### 3. Date Range (dash separator)
```json
"timestamp": "2026-01-20-2026-01-30"
```
Alternative format for date ranges. Parsed the same as colon format.

## Special Features

### Last Day Tag
When a task's end date equals today's date, the UI automatically:
- Shows a red "LAST DAY" badge
- Highlights the date in red
- Sorts it to the top of its column (highest priority)

This happens automatically based on the timestamp - no special field needed.

### Automatic Overdue Detection
The backend automatically checks timestamps and:
- Compares end dates with current date
- Moves tasks to "overdue" status if:
  - End date has passed
  - Task is not completed
  - Task is not already marked overdue

This happens on every API call that fetches page data.

## Complete Example Page

```json
{
  "id": "abc123-def456-ghi789",
  "name": "Development Tasks",
  "tasks": [
    {
      "id": "task-001",
      "title": "Design new feature",
      "description": "Create wireframes and mockups for the dashboard",
      "tags": ["important", "design"],
      "timestamp": "2026-01-25",
      "status": "completed"
    },
    {
      "id": "task-002",
      "title": "Sprint planning",
      "description": "Plan tasks for next sprint",
      "tags": ["urgent"],
      "timestamp": "2026-01-27",
      "status": "in-progress"
    },
    {
      "id": "task-003",
      "title": "Refactor authentication",
      "description": null,
      "tags": [],
      "timestamp": "2026-01-20:2026-01-30",
      "status": "todo"
    },
    {
      "id": "task-004",
      "title": "Fix login bug",
      "description": "Users can't login with special characters",
      "tags": ["urgent", "bug"],
      "timestamp": "2026-01-15",
      "status": "overdue"
    }
  ]
}
```

## Import/Export Format

When exporting all data, Udo creates a JSON file with this structure:

```json
{
  "settings": {
    "theme": "light",
    "sidebar_collapsed": false,
    "tags": [...]
  },
  "pages": [
    {
      "id": "page-1-id",
      "name": "Page 1",
      "tasks": [...]
    },
    {
      "id": "page-2-id",
      "name": "Page 2",
      "tasks": [...]
    }
  ]
}
```

## Creating Custom Data

To create your own data files:

1. **For a new page**: Create a JSON file in `backend/userdata/pages/` with a unique name
2. **Use UUIDs**: Generate unique IDs for pages and tasks
3. **Follow the schema**: Match the structure exactly as shown above
4. **Validate dates**: Use YYYY-MM-DD format
5. **Reference tags**: Only use tag IDs that exist in maindata.json

## Tips

- Keep task titles concise (they display in cards)
- Use descriptions for longer details
- Create tags before assigning them to tasks
- Use date ranges for multi-day tasks
- Let the system handle overdue detection
- Export data regularly as backup

## Data Location

All data is stored locally in:
- **Main settings**: `backend/userdata/maindata.json`
- **Pages**: `backend/userdata/pages/*.json`

You can manually edit these files while the app is not running, or use the import/export features in the Settings page.
